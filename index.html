<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Alexander's Darknode portal</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.min.js"></script>
    <script scr="https://cdn.jsdelivr.net/npm/web3modal@latest"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
        integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.css" />

    <style scoped>
        .select select {
            text-rendering: auto !important;
        }
    </style>
</head>

<body>
    <div id="app">
        <section class="section">
            <div class="container">
                <h1 class="title" v-if="selectedAccount">
                    Welcome {{ selectedAccount }}.
                </h1>
                <h1 class="title" v-else>
                    <button @click="setProvider()" class="is-large button" id="connect">Connect wallet</button>
                </h1>
                <div v-if="allDarknodes">
                    <h2 v-if="loadingDarknodes">
                    <span class="icon" v-if="loadingDarknodes">
                        <i class="fas fa-money-bill-wave fa-pulse"></i>
                    </span>
                    {{getSearchPercentage()}} % of all Darknodes searched.
                    </h2>
                    <h2 v-if="privateDarknodes">
                        You have {{privateDarknodes.length}} Darknodes: {{"[" + String(privateDarknodes).replace('"', "").replace(",", ", ") + "]"}}
                    </h2>
                    <br>
                    <h2 v-if="privateDarknodes">They have earned {{roundValue(fees/10**8)}} renBTC and {{roundValue(pendingRewardPool*privateDarknodes.length/allDarknodes.length/10**8)}} renBTC pending</h2>
                    <br>
                    <button v-if="privateDarknodes" class="button is-small" @click="writeFeeWithdrawal()">Withdraw renBTC from above Darknodes</button>
                    <br>
                    <br>
                    <div class="columns">
                        <div class="column">
                            <div class="columns">
                                <div class="column" v-for="dn in privateDarknodes">
                                    <div class="card">
                                        <header class="card-header">
                                            {{dn}}
                                        </header>
                                        <div class="card-content">
                                            <div class="content">
                                                Operator: {{darknodesInformation[dn].operator}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="column">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>
                                            Operator
                                        </th>
                                        <th>
                                            Number of Darknodes
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr v-for="(inf, key) in sortedOperators()" :key="allDarknodes">
                                        <td>
                                            {{key}}
                                        </td>
                                        <td>
                                            {{inf.length}}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    
  
    <script type="text/javascript" src="https://unpkg.com/web3@1.2.11/dist/web3.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/web3modal@1.9.0/dist/index.js"></script>
    <script type="text/javascript" src="https://unpkg.com/evm-chains/lib/index.js"></script>
    <script type="text/javascript" src="https://unpkg.com/@walletconnect/web3-provider@1.2.1/dist/umd/index.min.js"></script>
    <script type="text/javascript" src="https://unpkg.com/fortmatic@2.0.6/dist/fortmatic.js"></script>

    <script src="/DarknodeWithdrawMultiple/abi.js"></script>
    <script src="/DarknodeWithdrawMultiple/dn.js"></script>
</body>

</html>